<!DOCTYPE html>
<%- include("../include/professor/professor_head") %>

<!-- Content -->

<body>
   <%- include("../include/professor/professor_navbar") %>

   <!-- Footer -->
   <%- include("../include/professor/professor_utils") %>

   <div class="main">
      <div class="container w-100">
         <div class="row d-flex justify-content-start mx-3 mt-4">
            <div class="col-lg-9">
               <h3 class="heading"><%= json_course.type %></h3>
            </div>
            <div class="col-lg-3 d-flex justify-content-end align-items-center">
               <a class="btn btn-lg btn-primary" style="border-radius: 10%;" href="#" data-bs-toggle="modal" data-bs-target="#addClass"
                  ><i class="bi bi-plus-lg"></i> Adicionar Aula</a
               >
            </div>
         </div>
         <div class="row mt-3 w-100">
             <% for(let i=0;i<json_classes.length; i++) { %>
                <div class="col-lg-12 mt-2">
                    <div class="card shadow mt-2 mb-2 mx-4 w-100">
                        <div class="card-body statistic w-100">
                            <h3><%= json_classes[i].title %></h3> 
                            <hr>
                            <div class="row">
                                <div class="col-lg-8">
                                    <label for="summary<%= json_classes[i].id %>"><h5><strong>Sumário</strong></h5></label>
                                    <textarea id="summary<%= json_classes[i].id %>" class="form-control mt-2" rows="4" readonly><%= json_classes[i].summary %></textarea>
                                </div>
                                <div class="col-lg-4">
                                    <ul class="list-group list-group-flush mt-1">
                                        <li class="list-group-item text-center mt-1 mb-1 border-0"><strong>Data da Publicação:</strong> <%= json_classes[i].class_date %></li>
                                        <li class="list-group-item text-end mt-1 border-0"><a class="btn btn-primary w-100" href="#" id="editClass<%= json_classes[i].id %>">Editar Aula <i class="bi bi-pencil"></i></a></li>
                                        <li class="list-group-item text-end mt-1 border-0"><a class="btn btn-primary w-100" href="#" id="submitClass<%= json_classes[i].id %>">Submeter Edição <i class="bi bi-pencil-square"></i></a></li>
                                        <script>

                                            $("#submitClass<%= json_classes[i].id %>").hide()
                                            document.getElementById("editClass<%= json_classes[i].id %>").addEventListener("click", () => {
                                                $("#summary<%= json_classes[i].id %>").removeAttr("readonly")
                                                setTimeout(() => {
                                                    $("#submitClass<%= json_classes[i].id %>").fadeIn()
                                                }, 1000)
                                            })

                                            document.getElementById("submitClass<%= json_classes[i].id %>").addEventListener("click", () => {
                                                postURL = "/editClass/<%= json_classes[i].id %>"
                                                postData = $("#summary<%= json_classes[i].id %>").val()
                                                console.log(postData)
                                            })
                                        </script>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

             <% } %>
         </div>
      </div>
   </div>
</body>
